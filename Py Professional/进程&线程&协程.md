# 进程&线程&协程

并发编程

# 进程

操作系统中执行的一个程序，操作系统以进程为单位分配存储空间，每个进程都有自己的地址空间、数据栈以及其他用于跟踪进程执行的辅助数据，操作系统管理所有进程的执行，为它们合理的分配资源。

os

multiprocessing

```python
from multiprocessing import Process
from os import getpid
```

通过`Process`类创建进程对象，通过`target`参数传入一个函数来表示进程启动后要执行的代码，`args`是一个元组，代表传递给函数的参数。

`Process`对象的`start`方法用来启动进程，而`join`方法表示等待进程执行结束。

## 进程间通信

使用multiprocessing模块中的`Queue`类，它是可以被多个进程共享的队列。

# 线程

一个进程还可以拥有多个并发的执行线索，简单的说就是拥有多个可以获得CPU调度的执行单元，这就是所谓的线程。

threading

使用threading模块的`Thread`类来创建线程

# 锁

通过“锁”来保护“临界资源”

# 协程

单线程+异步I/O的编程模型称为协程

协程最大的优势就是极高的执行效率，因为子程序切换不是线程切换，而是由程序自身控制，因此，没有线程切换的开销。

协程的第二个优势就是不需要多线程的锁机制，因为只有一个线程，也不存在同时写变量冲突，在协程中控制共享资源不用加锁，只需要判断状态就好了，所以执行效率比多线程高很多。